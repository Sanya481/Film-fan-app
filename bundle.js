(()=>{var e={10:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(537),s=i.n(n),a=i(645),r=i.n(a)()(s());r.push([e.id,".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n","",{version:3,sources:["webpack://./src/framework/view/abstract-view.css"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE;;IAEE,wBAAwB;EAC1B;;EAEA;;;;;IAKE,2BAA2B;EAC7B;;EAEA;;;;IAIE,0BAA0B;EAC5B;AACF",sourcesContent:[".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n"],sourceRoot:""}]);const l=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var l=0;l<this.length;l++){var o=this[l][0];null!=o&&(r[o]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&r[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},537:e=>{"use strict";e.exports=function(e){var t=e[1],i=e[3];if(!i)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),a="/*# ".concat(s," */");return[t].concat([a]).join("\n")}return[t].join("\n")}},484:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,i="millisecond",n="second",s="minute",a="hour",r="day",l="week",o="month",c="quarter",d="year",m="date",h="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],i=e%100;return"["+e+(t[(i-20)%10]||t[i]||t[0])+"]"}},v=function(e,t,i){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(i)+e},_={s:v,z:function(e){var t=-e.utcOffset(),i=Math.abs(t),n=Math.floor(i/60),s=i%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(s,2,"0")},m:function e(t,i){if(t.date()<i.date())return-e(i,t);var n=12*(i.year()-t.year())+(i.month()-t.month()),s=t.clone().add(n,o),a=i-s<0,r=t.clone().add(n+(a?-1:1),o);return+(-(n+(i-s)/(a?s-r:r-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:o,y:d,w:l,d:r,D:m,h:a,m:s,s:n,ms:i,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",C={};C[g]=p;var w=function(e){return e instanceof $},y=function e(t,i,n){var s;if(!t)return g;if("string"==typeof t){var a=t.toLowerCase();C[a]&&(s=a),i&&(C[a]=i,s=a);var r=t.split("-");if(!s&&r.length>1)return e(r[0])}else{var l=t.name;C[l]=t,s=l}return!n&&s&&(g=s),s||!n&&g},M=function(e,t){if(w(e))return e.clone();var i="object"==typeof t?t:{};return i.date=e,i.args=arguments,new $(i)},b=_;b.l=y,b.i=w,b.w=function(e,t){return M(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var $=function(){function p(e){this.$L=y(e.locale,null,!0),this.parse(e)}var v=p.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,i=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(u);if(n){var s=n[2]-1||0,a=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return b},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,t){var i=M(e);return this.startOf(t)<=i&&i<=this.endOf(t)},v.isAfter=function(e,t){return M(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<M(e)},v.$g=function(e,t,i){return b.u(e)?this[t]:this.set(i,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var i=this,c=!!b.u(t)||t,h=b.p(e),u=function(e,t){var n=b.w(i.$u?Date.UTC(i.$y,t,e):new Date(i.$y,t,e),i);return c?n:n.endOf(r)},f=function(e,t){return b.w(i.toDate()[e].apply(i.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),i)},p=this.$W,v=this.$M,_=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case d:return c?u(1,0):u(31,11);case o:return c?u(1,v):u(0,v+1);case l:var C=this.$locale().weekStart||0,w=(p<C?p+7:p)-C;return u(c?_-w:_+(6-w),v);case r:case m:return f(g+"Hours",0);case a:return f(g+"Minutes",1);case s:return f(g+"Seconds",2);case n:return f(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var l,c=b.p(e),h="set"+(this.$u?"UTC":""),u=(l={},l[r]=h+"Date",l[m]=h+"Date",l[o]=h+"Month",l[d]=h+"FullYear",l[a]=h+"Hours",l[s]=h+"Minutes",l[n]=h+"Seconds",l[i]=h+"Milliseconds",l)[c],f=c===r?this.$D+(t-this.$W):t;if(c===o||c===d){var p=this.clone().set(m,1);p.$d[u](f),p.init(),this.$d=p.set(m,Math.min(this.$D,p.daysInMonth())).$d}else u&&this.$d[u](f);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[b.p(e)]()},v.add=function(i,c){var m,h=this;i=Number(i);var u=b.p(c),f=function(e){var t=M(h);return b.w(t.date(t.date()+Math.round(e*i)),h)};if(u===o)return this.set(o,this.$M+i);if(u===d)return this.set(d,this.$y+i);if(u===r)return f(1);if(u===l)return f(7);var p=(m={},m[s]=e,m[a]=t,m[n]=1e3,m)[u]||1,v=this.$d.getTime()+i*p;return b.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,i=this.$locale();if(!this.isValid())return i.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=b.z(this),a=this.$H,r=this.$m,l=this.$M,o=i.weekdays,c=i.months,d=function(e,i,s,a){return e&&(e[i]||e(t,n))||s[i].slice(0,a)},m=function(e){return b.s(a%12||12,e,"0")},u=i.meridiem||function(e,t,i){var n=e<12?"AM":"PM";return i?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:b.s(l+1,2,"0"),MMM:d(i.monthsShort,l,c,3),MMMM:d(c,l),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:d(i.weekdaysMin,this.$W,o,2),ddd:d(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(a),HH:b.s(a,2,"0"),h:m(1),hh:m(2),a:u(a,r,!0),A:u(a,r,!1),m:String(r),mm:b.s(r,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:s};return n.replace(f,(function(e,t){return t||p[e]||s.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(i,m,h){var u,f=b.p(m),p=M(i),v=(p.utcOffset()-this.utcOffset())*e,_=this-p,g=b.m(this,p);return g=(u={},u[d]=g/12,u[o]=g,u[c]=g/3,u[l]=(_-v)/6048e5,u[r]=(_-v)/864e5,u[a]=_/t,u[s]=_/e,u[n]=_/1e3,u)[f]||_,h?g:b.a(g)},v.daysInMonth=function(){return this.endOf(o).$D},v.$locale=function(){return C[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var i=this.clone(),n=y(e,t,!0);return n&&(i.$L=n),i},v.clone=function(){return b.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),k=$.prototype;return M.prototype=k,[["$ms",i],["$s",n],["$m",s],["$H",a],["$W",r],["$M",o],["$y",d],["$D",m]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),M.extend=function(e,t){return e.$i||(e(t,$,M),e.$i=!0),M},M.locale=y,M.isDayjs=w,M.unix=function(e){return M(1e3*e)},M.en=C[g],M.Ls=C,M.p={},M}()},379:e=>{"use strict";var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var a={},r=[],l=0;l<e.length;l++){var o=e[l],c=n.base?o[0]+n.base:o[0],d=a[c]||0,m="".concat(c," ").concat(d);a[c]=d+1;var h=i(m),u={css:o[1],media:o[2],sourceMap:o[3],supports:o[4],layer:o[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var f=s(u,n);n.byIndex=l,t.splice(l,0,{identifier:m,updater:f,references:1})}r.push(m)}return r}function s(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,s){var a=n(e=e||[],s=s||{});return function(e){e=e||[];for(var r=0;r<a.length;r++){var l=i(a[r]);t[l].references--}for(var o=n(e,s),c=0;c<a.length;c++){var d=i(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=o}}},569:e=>{"use strict";var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var a=i.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={id:n,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,(()=>{"use strict";var e=i(379),t=i.n(e),n=i(795),s=i.n(n),a=i(569),r=i.n(a),l=i(565),o=i.n(l),c=i(216),d=i.n(c),m=i(589),h=i.n(m),u=i(10),f={};f.styleTagTransform=h(),f.setAttributes=o(),f.insert=r().bind(null,"head"),f.domAPI=s(),f.insertStyleElement=d(),t()(u.Z,f),u.Z&&u.Z.locals&&u.Z.locals;const p="shake";class v{#e=null;_callback={};constructor(){if(new.target===v)throw new Error("Can't instantiate AbstractView, only concrete one.")}get element(){return this.#e||(this.#e=_(this.template)),this.#e}get template(){throw new Error("Abstract method not implemented: get template")}removeElement(){this.#e=null}shake(e){this.element.classList.add(p),setTimeout((()=>{this.element.classList.remove(p),e?.()}),600)}}const _=e=>{const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},g=(e,t,i="beforeend")=>{if(!(e instanceof v))throw new Error("Can render only components");if(null===t)throw new Error("Container element doesn't exist");t.insertAdjacentElement(i,e.element)},C=(e,t)=>{if(!(e instanceof v&&t instanceof v))throw new Error("Can replace only components");const i=e.element,n=t.element,s=n.parentElement;if(null===s)throw new Error("Parent element doesn't exist");s.replaceChild(i,n)},w=e=>{if(null!==e){if(!(e instanceof v))throw new Error("Can remove only components");e.element.remove(),e.removeElement()}};class y extends v{get template(){return'\n  <section class="films">\n\n  </section>\n'}}class M extends v{get template(){return'\n<section class="films-list">\n  <h2 class="films-list__title visually-hidden">All movies. Upcoming</h2>\n</section>\n'}}class b extends v{get template(){return'\n  <div class="films-list__container">\n\n  </div>\n'}}const $=()=>'\n  <button class="films-list__show-more">Show more</button>\n';class k extends v{setShowMoreBtnClickHandler(e){this._callback.click=e,this.element.addEventListener("click",this.#t)}#t=()=>{this._callback.click()};get template(){return $}}class S extends v{get template(){return'\n<section class="films">\n    <section class="films-list">\n      <h2 class="films-list__title">There are no movies in our database</h2>\n    </section>\n  </section>\n  '}}const D="default",F="watchlist",A="alreadywatched",T="favorites",E="default",I="date",V="rating";class j extends v{setSortTypeChangeHandler=e=>{this._callback.click=e,this.element.addEventListener("click",this.#i)};#i=e=>{"A"===e.target.tagName&&(e.preventDefault(),this.element.querySelector(".sort__button--active").classList.remove("sort__button--active"),e.target.classList.toggle("sort__button--active"),this._callback.click(e.target.dataset.sortType))};get template(){return`\n  <ul class="sort">\n    <li><a href="#" class="sort__button sort__button--active" data-sort-type=${E}>Sort by default</a></li>\n    <li><a href="#" class="sort__button" data-sort-type=${I}>Sort by date</a></li>\n    <li><a href="#" class="sort__button" data-sort-type=${V}>Sort by rating</a></li>\n  </ul>\n`}}class L extends v{#n;constructor(e){super(),this.#n=e}get template(){return`<p>${this.#n} movies inside</p>`}}var P=i(484),x=i.n(P);const B=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),W=()=>0===Math.floor(2*Math.random()),O=(e,t)=>e?x()(e).format(t):"",H=(e,t)=>{const i=B(e,t);return i<10?`0${i}`:`${i}`},q=()=>`${B(1900,2023)}-${H(1,12)}-${H(1,31)}`,N=e=>{const t=B(1,e.length),i=[];for(;i.length!==t;){const t=e[B(0,e.length-1)];-1===i.indexOf(t)&&i.push(t)}return i},Y=e=>{if(e<60)return`${e}m`;if(e%60==0)return e/60+"h";if(e%60!=0){const t=e%60;return`${(e-t)/60}h ${t}m`}},R=e=>{const t=B(0,e.length-1),i=B(0,t);return e.slice(i,t+1)},U=(e,t)=>e?t:"";function Z(e,t){return i=e.filmInfo.release.date,n=t.filmInfo.release.date,(null===i&&null===n?0:null===i?1:null===n?-1:null)??x()(t.filmInfo.release.date).diff(x()(e.filmInfo.release.date));var i,n}class G extends v{_state={};updateElement=e=>{e&&(this._setState(e),this.#s())};_restoreHandlers=()=>{throw new Error("Abstract method not implemented: restoreHandlers")};_setState=e=>{this._state={...this._state,...e}};#s=()=>{const e=this.element,t=e.parentElement;this.removeElement();const i=this.element;t.replaceChild(i,e),this._restoreHandlers()}}class J extends G{#a=null;#r=null;constructor(e,t,i){super(),this.#a=e,this.#r=t,this._callback.movieGroupBtnClick=i,this.element.querySelector("[data-film-details__controls]").addEventListener("click",this.#l)}setMoviePopupCloseHandler=e=>{this._callback.closeBtnClick=e,this.element.querySelector(".film-details__close-btn").addEventListener("click",this.#o)};#o=()=>{this._callback.closeBtnClick()};#l=e=>{"BUTTON"===e.target.tagName&&this._callback.movieGroupBtnClick(e.target.name,e)};setEmojiCommentChoice=e=>{this._callback.emojiChoice=e,this.element.querySelector("[data-film-details__emoji-list]").addEventListener("click",this.#c)};#c=e=>{"INPUT"===e.target.tagName&&this._callback.emojiChoice(e.target.value)};get template(){return((e,t)=>{const{comments:i,filmInfo:n,userDetails:s}=e,a=[];i.forEach((e=>{t.find((t=>{t.id===e&&a.push(t)}))}));const r=n.genre.map((e=>`<span class="film-details__genre"> ${e}</> `)).join(""),l=(e=>e.map((e=>`\n  <li class="film-details__comment">\n    <span class="film-details__comment-emoji">\n      <img src="./images/emoji/${e.emotion}.png" width="55" height="55" alt="emoji-${e.emotion}">\n    </span>\n    <div>\n      <p class="film-details__comment-text">${e.comment}</p>\n      <p class="film-details__comment-info">\n        <span class="film-details__comment-author">${e.author}</span>\n        <span class="film-details__comment-day">2019/12/31 23:59</span>\n        <button class="film-details__comment-delete">Delete</button>\n      </p>\n    </div>\n  </li>\n`)).join(""))(a),o="film-details__control-button--active";return`\n      <section class="film-details">\n        <form class="film-details__inner" action="" method="get">\n          <div class="film-details__top-container">\n            <div class="film-details__close">\n              <button class="film-details__close-btn" type="button">close</button>\n            </div>\n            <div class="film-details__info-wrap">\n              <div class="film-details__poster">\n                <img class="film-details__poster-img" src="${n.poster}" alt="${n.title}">\n\n                  <p class="film-details__age">${n.ageRating}+</p>\n              </div>\n\n              <div class="film-details__info">\n                <div class="film-details__info-head">\n                  <div class="film-details__title-wrap">\n                    <h3 class="film-details__title">${n.alternativeTitle}</h3>\n                    <p class="film-details__title-original">Original: ${n.title}</p>\n                  </div>\n\n                  <div class="film-details__rating">\n                    <p class="film-details__total-rating">${n.totalRating}</p>\n                  </div>\n                </div>\n\n                <table class="film-details__table">\n                  <tr class="film-details__row">\n                    <td class="film-details__term">Director</td>\n                    <td class="film-details__cell">${n.director}</td>\n                  </tr>\n                  <tr class="film-details__row">\n                    <td class="film-details__term">Writers</td>\n                    <td class="film-details__cell">${n.writers}</td>\n                  </tr>\n                  <tr class="film-details__row">\n                    <td class="film-details__term">Actors</td>\n                    <td class="film-details__cell">${n.actors}</td>\n                  </tr>\n                  <tr class="film-details__row">\n                    <td class="film-details__term">Release Date</td>\n                    <td class="film-details__cell">${O(n.release.date,"D MMMM YYYY")}</td>\n                  </tr>\n                  <tr class="film-details__row">\n                    <td class="film-details__term">Runtime</td>\n                    <td class="film-details__cell">${n.runtime}</td>\n                  </tr>\n                  <tr class="film-details__row">\n                    <td class="film-details__term">Country</td>\n                    <td class="film-details__cell">${n.release.releaseCountry}</td>\n                  </tr>\n                  <tr class="film-details__row">\n                    <td class="film-details__term">Genres</td>\n                    <td class="film-details__cell">\n                      ${r}\n                  </tr>\n                </table>\n\n                <p class="film-details__film-description">\n                  ${n.description}\n                </p>\n              </div>\n            </div>\n\n            <section class="film-details__controls" data-film-details__controls>\n              <button type="button" class="film-details__control-button film-details__control-button--watchlist ${U(s.watchlist,o)}" id="watchlist" name="watchlist">Add to watchlist</button>\n              <button type="button" class="film-details__control-button film-details__control-button--watched ${U(s.alreadyWatched,o)}" id="watched" name="watched">Already watched</button>\n              <button type="button" class="film-details__control-button film-details__control-button--favorite ${U(s.favorite,o)}" id="favorite" name="favorite">Add to favorites</button>\n            </section>\n          </div>\n\n          <div class="film-details__bottom-container">\n            <section class="film-details__comments-wrap">\n              <h3 class="film-details__comments-title">Comments <span class="film-details__comments-count">${i.length}</span></h3>\n\n              <ul class="film-details__comments-list">\n                ${l}\n              </ul>\n\n              <div class="film-details__new-comment">\n                <div class="film-details__add-emoji-label" data-film-details__add-emoji-label></div>\n\n                <label class="film-details__comment-label">\n                  <textarea class="film-details__comment-input" placeholder="Select reaction below and write comment here" name="comment"></textarea>\n                </label>\n\n                <div class="film-details__emoji-list" data-film-details__emoji-list>\n                  <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-smile" value="smile">\n                    <label class="film-details__emoji-label" for="emoji-smile">\n                      <img src="./images/emoji/smile.png" width="30" height="30" alt="emoji">\n                    </label>\n\n                    <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-sleeping" value="sleeping">\n                      <label class="film-details__emoji-label" for="emoji-sleeping">\n                        <img src="./images/emoji/sleeping.png" width="30" height="30" alt="emoji">\n                      </label>\n\n                      <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-puke" value="puke">\n                        <label class="film-details__emoji-label" for="emoji-puke">\n                          <img src="./images/emoji/puke.png" width="30" height="30" alt="emoji">\n                        </label>\n\n                        <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-angry" value="angry">\n                          <label class="film-details__emoji-label" for="emoji-angry">\n                            <img src="./images/emoji/angry.png" width="30" height="30" alt="emoji">\n                          </label>\n                        </div>\n                      </div>\n                    </section>\n                </div>\n              </form>\n            </section>\n            `})(this.#a,this.#r)}}const X=document.body;class z{#d=[];#m=null;#h=null;#u=null;#f=null;onMovieCardChange=null;constructor({onMovieChange:e}){this.onMovieCardChange=e}#p=(e,t)=>{switch(e){case"watchlist":this.#h.userDetails.watchlist=!this.#h.userDetails.watchlist,this.onMovieCardChange(this.#h),this.updatePopup(this.#h),console.log(this.#u.element);break;case"watched":this.#h.userDetails.alreadyWatched=!this.#h.userDetails.alreadyWatched,this.onMovieCardChange(this.#h),this.updatePopup(this.#h);break;case"favorite":this.#h.userDetails.favorite=!this.#h.userDetails.favorite,this.onMovieCardChange(this.#h),this.updatePopup(this.#h)}};#v=e=>{const t=`<img src="./images/emoji/${e}.png" width="55" height="55" alt="${e}"></img>`,i=this.#u.element.querySelector(".film-details__add-emoji-label");null!==i.firstChild&&i.removeChild(i.firstChild),i.insertAdjacentHTML("afterbegin",t)};updatePopup=e=>{this.prevPopup=this.#u,this.#_(e),C(this.#u,this.prevPopup)};#_=e=>{this.#u=new J(e,this.#d,this.#p);const t=()=>{w(this.#u),X.classList.remove("hide-overflow"),document.removeEventListener("keydown",i)};function i(e){"Escape"===e.key&&(e.preventDefault(),t())}document.addEventListener("keydown",i),this.#u.setMoviePopupCloseHandler(t),this.#u.setEmojiCommentChoice(this.#v)};destroy(){w(this.#u)}init=(e,t,i)=>{this.#h=e,this.#d=t,this.#m=i,this.#_(this.#h),g(this.#u,this.#m),X.classList.add("hide-overflow")}}class Q extends v{#h=null;constructor(e){super(),this.#h=e}setMovieCardClickHandler=e=>{this._callback.clickOnMovieCard=e,this.element.querySelector(".film-card__link").addEventListener("click",this.#g)};#g=e=>{e.preventDefault(),this._callback.clickOnMovieCard(this.#h)};setWatchlistClickHandler=e=>{this._callback.clickOnWatchlistBtn=e,this.element.querySelector("[data-add-to-watchlist]").addEventListener("click",this.#C)};#C=()=>{this._callback.clickOnWatchlistBtn()};setAlreadyWatchedClickHandler=e=>{this._callback.clickOnAlreadyWatchedBtn=e,this.element.querySelector("[data-mark-as-watched]").addEventListener("click",this.#w)};#w=()=>{this._callback.clickOnAlreadyWatchedBtn()};setFavoriteClickHandler=e=>{this._callback.clickOnFavoriteBtn=e,this.element.querySelector("[data-mark-as-favorite]").addEventListener("click",this.#y)};#y=()=>{this._callback.clickOnFavoriteBtn()};get template(){return(e=>{const{filmInfo:t,comments:i,userDetails:n}=e,s=null!==t.release.date?O(t.release.date,"YYYY"):"",a=n.watchlist?"film-card__controls-item--active":"",r=n.alreadyWatched?"film-card__controls-item--active":"",l=n.favorite?"film-card__controls-item--active":"";return`\n<article class="film-card">\n  <a class="film-card__link">\n    <h3 class="film-card__title">${t.title}</h3>\n    <p class="film-card__rating">${t.totalRating}</p>\n    <p class="film-card__info">\n      <span class="film-card__year">${s}</span>\n      <span class="film-card__duration">${t.runtime}</span>\n      <span class="film-card__genre">${t.genre}</span>\n    </p>\n    <img src=${t.poster} alt="${t.title}" class="film-card__poster">\n    <p class="film-card__description">${t.description}</p>\n    <span class="film-card__comments">${i.length} comments</span>\n  </a>\n  <div class="film-card__controls">\n    <button class="film-card__controls-item film-card__controls-item--add-to-watchlist ${a}" type="button" data-add-to-watchlist>Add to watchlist</button>\n    <button class="film-card__controls-item film-card__controls-item--mark-as-watched ${r}" type="button" data-mark-as-watched>Mark as watched</button>\n    <button class="film-card__controls-item film-card__controls-item--favorite ${l}" type="button" data-mark-as-favorite>Mark as favorite</button>\n  </div>\n</article>\n`})(this.#h)}}class K{container=null;movieCard=null;movieCardView=null;prevMovieCardView=null;constructor(e,t,{onMovieChange:i}){this.container=e,this.openFilmPopup=t,this.onMovieChange=i}#M=()=>{this.movieCard.userDetails.watchlist=!this.movieCard.userDetails.watchlist,this.onMovieChange(this.movieCard)};#b=()=>{this.movieCard.userDetails.alreadyWatched=!this.movieCard.userDetails.alreadyWatched,this.onMovieChange(this.movieCard)};#$=()=>{this.movieCard.userDetails.favorite=!this.movieCard.userDetails.favorite,this.onMovieChange(this.movieCard)};#k=e=>{this.movieCardView=new Q(e),this.movieCardView.setMovieCardClickHandler(this.openFilmPopup),this.movieCardView.setWatchlistClickHandler(this.#M),this.movieCardView.setAlreadyWatchedClickHandler(this.#b),this.movieCardView.setFavoriteClickHandler(this.#$)};updateMovieCard=e=>{this.prevMovieCardView=this.movieCardView,this.#k(e),C(this.movieCardView,this.prevMovieCardView)};destroy(){w(this.movieCardView)}init(e){this.movieCard=e,this.#k(e),g(this.movieCardView,this.container)}}class ee extends v{filterMovieType;#S;constructor(e){super(),this.movies=e}get value(){return this.#S}set value(e){this.#S=e}setFilterListClickHandler=e=>{this._callback.click=e,this.element.addEventListener("click",this.#D)};#D=e=>{"A"===e.target.tagName&&(e.preventDefault(),this.element.querySelector(".main-navigation__item--active").classList.remove("main-navigation__item--active"),e.target.classList.toggle("main-navigation__item--active"),this.value=e.target.dataset.filterType,this._callback.click(e.target.dataset.filterType))};get template(){return((e,t)=>{console.log(t);const i=e.filter((e=>!0===e.userDetails.watchlist)),n=e.filter((e=>!0===e.userDetails.alreadyWatched)),s=e.filter((e=>!0===e.userDetails.favorite));return`\n<nav class="main-navigation">\n  <a href="#all" class="main-navigation__item main-navigation__item--active " data-filter-type="${D}">All movies</a>\n  <a href="#watchlist" class="main-navigation__item " data-filter-type="${F}">\n    Watchlist\n    <span class="main-navigation__item-count">${i.length}</span>\n  </a>\n  <a href="#history" class="main-navigation__item " data-filter-type="${A}">\n    History\n    <span class="main-navigation__item-count">${n.length}</span>\n  </a>\n  <a href="#favorites" class="main-navigation__item " data-filter-type="${T}">\n    Favorites\n   <span class="main-navigation__item-count">${s.length}</span>\n  </a>\n</nav>\n  `})(this.movies)}}const te=document.body,ie=document.querySelector(".main"),ne=document.querySelector(".footer__statistics"),se=[1,2,3,4,5,6,7,8,9,10],ae=["The Dance of Life","Sagebrush Trail","The Man with the Golden Arm","Santa Claus Conquers the Martians","Popeye the Sailor Meets Sindbad the Sailor"],re=["The Shawshank Redemption","Silver Lining Playbook","Sausage Patry","About Time","Shark Tale","Die hard","Intouchables","Hangover","The lord of the rings","The dark knight","One flew over the Cuckoo’s nest","The silence of the lambs","How to train your dragon","Braveheart"],le=["Steven Spielberg","Martin Scorsese","Quentin Tarantino","Woody Allen"],oe=["Billy Wilder","Joel Coen","Francis Ford Coppola","William Goldman","Nora Ephron","Ernest Lehman","George Lucas"],ce=["Sean Connery","Liam Neeson","Linda Hamilton","Kurt Russell","Sylvester Stallone","Clint Eastwood"],de=["Russia","USA","Poland","Italy","Finland","India"],me=["Musical","Western","Drama","Comedy","Cartoon","Mystery"],he=["./images/posters/the-dance-of-life.jpg","./images/posters/sagebrush-trail.jpg","./images/posters/the-man-with-the-golden-arm.jpg","./images/posters/popeye-meets-sinbad.png","./images/posters/the-man-with-the-golden-arm.jpg"],ue=["Lorem ipsum dolor sit amet, consectetur adipiscing elit.","Cras aliquet varius magna, non porta ligula feugiat eget.","Fusce tristique felis at fermentum pharetra.","Nullam nunc ex, convallis sed finibus eget, sollicitudin eget ante.","Phasellus eros mauris, condimentum, sodales efficitur ipsum.","Sed blandit, eros vel aliquam faucibus, purus ex euismod diam.","Sed sed nisi sed augue convallis suscipit in sed felis.","Nunc fermentum tortor. In rutrum ac purus sit amet tempus."],fe=["smile","sleeping","puke","angry"],pe=["Lorem ipsum dolor sit amet, consectetur adipiscing elit.","Cras aliquet varius magna, non porta ligula feugiat eget.","Fusce tristique felis at fermentum pharetra.","Nullam nunc ex, convallis sed finibus eget, sollicitudin eget ante.","Phasellus eros mauris, condimentum, sodales efficitur ipsum.","Sed blandit, eros vel aliquam faucibus, purus ex euismod diam.","Sed sed nisi sed augue convallis suscipit in sed felis.","Nunc fermentum tortor. In rutrum ac purus sit amet tempus."],ve=(e,t)=>{return{id:t++,comments:N(se),filmInfo:{title:ae[B(0,ae.length-1)],alternativeTitle:re[B(0,re.length-1)],totalRating:B(0,10),poster:(i=he,i[Math.floor(Math.random()*i.length)]),ageRating:B(0,21),director:le[B(0,le.length-1)],writers:R(oe),actors:N(ce),release:{date:`${q()}T00:00:00.000Z`,releaseCountry:de[B(0,de.length-1)]},runtime:Y(B(35,220)),genre:N(me),description:ue[B(0,ue.length-1)]},userDetails:{watchlist:W(),alreadyWatched:W(),watchingDate:`${q()}T16:12:32.554Z`,favorite:W()}};var i},_e=(e,t)=>({id:t++,author:ce[B(0,ce.length-1)],comment:pe[B(0,pe.length-1)],date:`${q()}T16:12:32.554Z`,emotion:fe[B(0,fe.length-1)]}),ge=document.querySelector(".header"),Ce=document.querySelector(".main"),we=new class{#F=Array.from({length:48},ve);#A=Array.from({length:30},_e);get filmCards(){return this.#F}get userComments(){return this.#A}},ye=new class{listSortView=new j;commonFilmsSectionView=new y;#T=new M;movieCardContainerView=new b;emptyFilmListView=new S;#E=new k;#I=5;filmDetailsPopupPresenter=null;#V=null;#u=null;#j=null;filterMovieView=null;#L=D;#P=E;#x;#B=null;#W=null;#O=[];#H=[];#A=[];moviePresenters=new Map;constructor(e,t){this.#B=e,this.#W=t}#q=e=>{switch(e){case I:this.#O.sort(Z);break;case V:this.#O.sort(((e,t)=>t.filmInfo.totalRating-e.filmInfo.totalRating));break;default:this.#O=[...this.#H]}this.#P=e};#N=e=>{this.#P!==e&&(this.#q(e),this.#Y(),this.#R())};#U=()=>{this.listSortView.setSortTypeChangeHandler(this.#N),g(this.listSortView,this.#B)};#Z=()=>{this.#O.slice(this.#I,this.#I+5).forEach((e=>this.#G(e,this.#A))),this.#I+=5,this.#I>=this.#O.length&&w(this.#E)};#J(){this.#O.length>5&&(this.#E.setShowMoreBtnClickHandler(this.#Z),g(this.#E,this.#T.element))}rerenderMovieCard=e=>{var t,i;console.log("ДО this.#originalMovieCardsInfo",this.#O),this.#O=(t=this.#O,i=e,t.map((e=>e.id===i.id?i:e))),console.log("updatedMovie",e),console.log("this.#originalMovieCardsInfo",this.#O),this.moviePresenters.get(e.id).updateMovieCard(e),this.updateFilterView()};#X=()=>{null!==this.filmDetailsPopupPresenter&&(this.filmDetailsPopupPresenter.destroy(),this.filmDetailsPopupPresenter=null)};#z=e=>{this.#X(),this.filmDetailsPopupPresenter=new z({onMovieChange:this.rerenderMovieCard}),this.filmDetailsPopupPresenter.init(e,this.#A,te)};#G=e=>{this.#j=new K(this.movieCardContainerView.element,this.#z,{onMovieChange:this.rerenderMovieCard}),this.#j.init(e),this.moviePresenters.set(e.id,this.#j)};#R=()=>{for(let e=0;e<Math.min(this.#O.length,5);e++)this.#G(this.#O[e],this.#A)};#Y=()=>{this.moviePresenters.forEach((e=>e.destroy())),this.moviePresenters.clear(),this.#I=5};#Q(){g(this.commonFilmsSectionView,this.#B),g(this.#T,this.commonFilmsSectionView.element),g(this.movieCardContainerView,this.#T.element)}#K(){g(this.emptyFilmListView,this.#B)}#ee=e=>{switch(e){case F:this.#O=this.#H.filter((e=>!0===e.userDetails.watchlist)),this.filterMovieView.value=e;break;case A:this.#O=this.#H.filter((e=>!0===e.userDetails.alreadyWatched));break;case T:this.#O=this.#H.filter((e=>!0===e.userDetails.favorite));break;default:this.#O=[...this.#H]}this.#L=e};#te=e=>{this.#L!==e&&(this.#ee(e),this.#Y(),this.#R(),this.filterMovieView.filterMovieType=this.#L)};renderFilterMovies=()=>{this.filterMovieView=new ee(this.#O),this.filterMovieView.setFilterListClickHandler(this.#te),void 0===this.prevFilterMovieView&&g(this.filterMovieView,ie),console.log("this.filterMovieView",this.filterMovieView),console.log("this.prevFilterMovieView",this.prevFilterMovieView)};updateFilterView=()=>{this.prevFilterMovieView=this.filterMovieView,this.renderFilterMovies(),C(this.filterMovieView,this.prevFilterMovieView)};#ie(){this.totalQuantityFilmsView=new L(this.#O.length),g(this.totalQuantityFilmsView,ne)}#ne=e=>{0!==this.#O.length?(this.renderFilterMovies(),this.#U(),this.#Q(),this.#R(),this.#J(),this.#ie()):this.#K()};init=()=>{this.#O=[...this.#W.filmCards],this.#H=[...this.#W.filmCards],this.#A=[...this.#W.userComments],console.log(this.#O),this.#ne(this.#B)}}(Ce,we);g(new class extends v{get template(){return'\n<section class="header__profile profile">\n  <p class="profile__rating">Movie Buff</p>\n  <img class="profile__avatar" src="images/bitmap@2x.png" alt="Avatar" width="35" height="35">\n</section>\n'}},ge),ye.init()})()})();
//# sourceMappingURL=bundle.js.map